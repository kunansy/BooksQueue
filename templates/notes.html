{% extends 'index.html' %}

{%- block style -%}
<link rel="stylesheet" href="{{ url_for('static', filename='notes.css') }}">
{%- endblock style -%}

{%- block header -%}
<nav class="subnavbar">
    <a href="/notes"> Search notes </a>
    <a href="/notes/add"> Add note </a>
</nav>
{%- endblock header -%}

{% block main %}
<div class="form">
    <form action="/notes" method="GET">
        <input type="number" class="input" list="books" name="material_id" placeholder="Choose a material">
        <datalist id="books">
          {% for material_id, title in titles.items() %}
              <option value="{{ material_id }}"> «{{ title }}»
          {% endfor %}
      </datalist>
      <button type="submit" class="submit-button"> Search </button>
    </form>
</div>

{% for material_id, notes_m in notes|sort(attribute='page')|groupby('material_id') %}
{% if not loop.first %}
    <hr class="material_divider">
{% endif %}

<div class="group">
    <h3 class="material_title"> «{{ titles[material_id] }}» </h3>

    {% for chapter, note_c in notes_m|groupby('chapter') %}
        <h4 class="chapter_number"> Chapter: {{ chapter }} </h4>
        {% for note in note_c %}
        <div class="note hover">
            <p class="note-content"> {{ note.content }}</p>
            <p class="note-page"> Page: {{ note.page }} </p>
        </div>
        {% endfor %}
    {% endfor %}
</div>
{% endfor -%}
{% endblock main %}
